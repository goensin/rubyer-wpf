<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:converters="clr-namespace:Rubyer.Converters"
                    xmlns:rubyer="clr-namespace:Rubyer">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Rubyer;component/Themes/Button.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <converters:ColorToHueConverter x:Key="ColorToHueConverter" />

    <ControlTemplate x:Key="ColorPaletteSliderThumb" TargetType="{x:Type Thumb}">
        <Border Margin="-1"
                BorderBrush="{DynamicResource Border}"
                BorderThickness="1"
                CornerRadius="100">
            <Border x:Name="grip"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{DynamicResource DefaultBackground}"
                    BorderThickness="3"
                    CornerRadius="100"
                    SnapsToDevicePixels="True">
                <Border BorderBrush="{DynamicResource Border}"
                        BorderThickness="1"
                        CornerRadius="100" />
            </Border>
        </Border>
    </ControlTemplate>

    <ControlTemplate x:Key="ColorPaletteSlider" TargetType="{x:Type Slider}">
        <Border x:Name="border"
                Background="Transparent"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
            <Border Background="{TemplateBinding Background}" CornerRadius="{Binding ActualHeight, Converter={StaticResource HalfOfDoubleConverter}, RelativeSource={RelativeSource Self}}">
                <!--  轨道  -->
                <Track x:Name="PART_Track"
                       Grid.Row="1"
                       Margin="-2 0"
                       Cursor="Hand">
                    <Track.Thumb>
                        <Thumb x:Name="Thumb"
                               Width="{Binding Path=(rubyer:SliderHelper.GripDiameter), RelativeSource={RelativeSource AncestorType=Slider}}"
                               Height="{Binding Path=(rubyer:SliderHelper.GripDiameter), RelativeSource={RelativeSource AncestorType=Slider}}"
                               VerticalAlignment="Center"
                               Focusable="False"
                               Foreground="{TemplateBinding Foreground}"
                               OverridesDefaultStyle="True"
                               Template="{StaticResource ColorPaletteSliderThumb}" />
                    </Track.Thumb>
                </Track>
            </Border>
        </Border>
    </ControlTemplate>

    <Style x:Key="RubyerColorPalette" TargetType="{x:Type rubyer:ColorPalette}">
        <Setter Property="Background" Value="{DynamicResource FloatBackground}" />
        <Setter Property="BorderBrush" Value="{DynamicResource Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Foreground" Value="{DynamicResource DefaultForeground}" />
        <Setter Property="Margin" Value="5" />
        <Setter Property="Padding" Value="10" />
        <Setter Property="rubyer:ControlHelper.CornerRadius" Value="{DynamicResource AllContainerCornerRadius}" />
        <Setter Property="rubyer:ControlHelper.FocusedBrush" Value="{DynamicResource Primary}" />
        <Setter Property="rubyer:ControlHelper.FocusedForegroundBrush" Value="{DynamicResource WhiteForeground}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type rubyer:ColorPalette}">
                    <rubyer:Card>
                        <Grid Margin="{TemplateBinding Padding}" rubyer:PanelHelper.Spacing="10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Grid x:Name="PART_SlGrid"
                                  Grid.ColumnSpan="3"
                                  Height="150"
                                  Background="Transparent">
                                <Rectangle>
                                    <Rectangle.Fill>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Offset="0" Color="White" />
                                            <GradientStop Offset="1" Color="{Binding NoSlColor, Mode=OneWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>

                                <Rectangle>
                                    <Rectangle.Fill>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Offset="0" Color="#00FFFFFF" />
                                            <GradientStop Offset="1" Color="#FF000000" />
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>

                                <Thumb x:Name="PART_DragSLThumb"
                                       Width="16"
                                       Height="16"
                                       Cursor="Hand"
                                       Template="{StaticResource ColorPaletteSliderThumb}">
                                    <Thumb.Background>
                                        <SolidColorBrush Color="{Binding NoAlphaColor, Mode=OneWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                    </Thumb.Background>
                                </Thumb>
                            </Grid>

                            <StackPanel Grid.Row="1"
                                        Grid.ColumnSpan="3"
                                        rubyer:PanelHelper.Spacing="10">
                                <Slider x:Name="PART_ColorSlider"
                                        rubyer:SliderHelper.TrackThickness="10"
                                        Maximum="359.9"
                                        Minimum="0"
                                        Template="{StaticResource ColorPaletteSlider}">
                                    <Slider.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Offset="0.0" Color="Red" />
                                            <GradientStop Offset="0.17" Color="Yellow" />
                                            <GradientStop Offset="0.33" Color="Lime" />
                                            <GradientStop Offset="0.5" Color="Cyan" />
                                            <GradientStop Offset="0.67" Color="Blue" />
                                            <GradientStop Offset="0.83" Color="Magenta" />
                                            <GradientStop Offset="1.0" Color="Red" />
                                        </LinearGradientBrush>
                                    </Slider.Background>
                                </Slider>

                                <Border CornerRadius="{Binding ActualHeight, Converter={StaticResource HalfOfDoubleConverter}, RelativeSource={RelativeSource Self}}">
                                    <Border.Background>
                                        <DrawingBrush TileMode="Tile"
                                                      Viewbox="0,0,8,8"
                                                      ViewboxUnits="Absolute"
                                                      Viewport="0,0,8,8"
                                                      ViewportUnits="Absolute">
                                            <DrawingBrush.Drawing>
                                                <DrawingGroup>
                                                    <GeometryDrawing Brush="White">
                                                        <GeometryDrawing.Geometry>
                                                            <RectangleGeometry Rect="0,0,8,8" />
                                                        </GeometryDrawing.Geometry>
                                                    </GeometryDrawing>
                                                    <GeometryDrawing Brush="#FFD0D0D0">
                                                        <GeometryDrawing.Geometry>
                                                            <GeometryGroup>
                                                                <RectangleGeometry Rect="0,0,4,4" />
                                                                <RectangleGeometry Rect="4,4,4,4" />
                                                            </GeometryGroup>
                                                        </GeometryDrawing.Geometry>
                                                    </GeometryDrawing>
                                                </DrawingGroup>
                                            </DrawingBrush.Drawing>
                                        </DrawingBrush>
                                    </Border.Background>
                                    <Slider x:Name="PART_OpacitySlider"
                                            rubyer:SliderHelper.TrackThickness="10"
                                            Maximum="255"
                                            Minimum="0"
                                            Template="{StaticResource ColorPaletteSlider}"
                                            Value="{Binding Alpha, RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                        <Slider.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <GradientStop Offset="0.0" Color="Transparent" />
                                                <GradientStop Offset="1.0" Color="{Binding NoAlphaColor, Mode=OneWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                            </LinearGradientBrush>
                                        </Slider.Background>
                                    </Slider>
                                </Border>
                            </StackPanel>

                            <Border Grid.Row="2"
                                    Width="{Binding ActualHeight, RelativeSource={RelativeSource Self}}"
                                    MinHeight="30"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="{Binding Path=(rubyer:ControlHelper.CornerRadius), RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding Color, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                </Border.Background>
                            </Border>

                            <TextBox x:Name="PART_RgbTextBox"
                                     Grid.Row="2"
                                     Grid.Column="1"
                                     Text="{Binding Color, RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                <rubyer:InputBoxHelper.PostContent>
                                    <ToggleButton Padding="5"
                                                  rubyer:ControlHelper.FocusedBrush="Transparent"
                                                  rubyer:ControlHelper.MouseOverBrush="Transparent"
                                                  Background="Transparent"
                                                  Cursor="Hand"
                                                  Foreground="{DynamicResource SecondaryForeground}"
                                                  IsChecked="{Binding IsCopied, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                  IsHitTestVisible="{TemplateBinding IsCopied, Converter={StaticResource BooleanToInverseConverter}}">
                                        <rubyer:ToggleButtonHelper.CheckedContent>
                                            <rubyer:Icon Type="CheckLine" />
                                        </rubyer:ToggleButtonHelper.CheckedContent>
                                        <rubyer:Icon Type="FileCopyLine" />
                                    </ToggleButton>
                                </rubyer:InputBoxHelper.PostContent>
                            </TextBox>

                            <Button Style="{DynamicResource OutlineButton}"
                                    Grid.Row="2"
                                    Grid.Column="2"
                                    Padding="3"
                                    rubyer:ButtonHelper.IconType="SipLine"
                                    BorderBrush="{StaticResource Border}"
                                    FontSize="{TemplateBinding FontSize, Converter={StaticResource MultiplyConverter}, ConverterParameter=1.3}"
                                    Foreground="{DynamicResource DefaultForeground}" />

                            <StackPanel Grid.Row="3"
                                        Grid.ColumnSpan="3"
                                        rubyer:PanelHelper.Spacing="5"
                                        Orientation="Horizontal">
                                <rubyer:NumericBox MinWidth="55"
                                                   rubyer:InputBoxHelper.PreContent="A:"
                                                   MaxLength="3"
                                                   MaxValue="255"
                                                   MinValue="0"
                                                   ShowButton="False"
                                                   Value="{Binding Alpha, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                <rubyer:NumericBox MinWidth="55"
                                                   rubyer:InputBoxHelper.PreContent="R:"
                                                   MaxLength="3"
                                                   MaxValue="255"
                                                   MinValue="0"
                                                   ShowButton="False"
                                                   Value="{Binding Red, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                <rubyer:NumericBox MinWidth="55"
                                                   rubyer:InputBoxHelper.PreContent="G:"
                                                   MaxLength="3"
                                                   MaxValue="255"
                                                   MinValue="0"
                                                   ShowButton="False"
                                                   Value="{Binding Green, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                                <rubyer:NumericBox MinWidth="55"
                                                   rubyer:InputBoxHelper.PreContent="B:"
                                                   MaxLength="3"
                                                   MaxValue="255"
                                                   MinValue="0"
                                                   ShowButton="False"
                                                   Value="{Binding Blue, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                            </StackPanel>
                        </Grid>

                    </rubyer:Card>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>