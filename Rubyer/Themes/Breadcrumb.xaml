<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:rubyer="clr-namespace:Rubyer">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Rubyer;component/Themes/Resources/Default.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="RubyerBreadcrumbItem" TargetType="{x:Type rubyer:BreadcrumbItem}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="rubyer:ControlHelper.MouseOverBrush" Value="{Binding Path=(rubyer:ControlHelper.MouseOverBrush), RelativeSource={RelativeSource AncestorType=rubyer:Breadcrumb}}" />
        <Setter Property="Padding" Value="{Binding Path=(rubyer:ItemsControlHelper.ItemPadding), RelativeSource={RelativeSource AncestorType=rubyer:Breadcrumb}}" />
        <Setter Property="Margin" Value="{Binding Path=(rubyer:ItemsControlHelper.ItemMargin), RelativeSource={RelativeSource AncestorType=rubyer:Breadcrumb}}" />
        <Setter Property="Separator" Value="{Binding Separator, RelativeSource={RelativeSource AncestorType=rubyer:Breadcrumb}}" />
        <Setter Property="SeparatorBrush" Value="{Binding SeparatorBrush, RelativeSource={RelativeSource AncestorType=rubyer:Breadcrumb}}" />
        <Setter Property="SeparatorIcon" Value="{Binding SeparatorIcon, RelativeSource={RelativeSource AncestorType=rubyer:Breadcrumb}}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type rubyer:BreadcrumbItem}">
                    <Border x:Name="Bd"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                        <StackPanel Orientation="Horizontal">
                            <ContentPresenter x:Name="content"
                                              Margin="{TemplateBinding Padding}"
                                              Cursor="Hand"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />

                            <TextBlock x:Name="separator"
                                       Margin="{TemplateBinding Padding}"
                                       Foreground="{TemplateBinding SeparatorBrush}"
                                       SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                       Text="{TemplateBinding Separator}"
                                       Visibility="Collapsed" />

                            <rubyer:Icon x:Name="separatorIcon"
                                         Margin="{TemplateBinding Padding}"
                                         Foreground="{TemplateBinding SeparatorBrush}"
                                         SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                         Type="{Binding SeparatorIcon, RelativeSource={RelativeSource Mode=TemplatedParent}}">
                            </rubyer:Icon>
                        </StackPanel>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Foreground" Value="{Binding Path=(rubyer:ControlHelper.MouseOverBrush), RelativeSource={RelativeSource Mode=Self}}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{DynamicResource SeconarydText}" />
                        </Trigger>
                        <DataTrigger Binding="{Binding Href, Converter={StaticResource IsNullOrEmptyConverter}, RelativeSource={RelativeSource Mode=Self}}" Value="True">
                            <Setter Property="IsEnabled" Value="False" />
                        </DataTrigger>
                        <Trigger Property="SeparatorIcon" Value="{x:Null}">
                            <Setter TargetName="separator" Property="Visibility" Value="Visible" />
                            <Setter TargetName="separatorIcon" Property="Visibility" Value="Collapsed" />
                        </Trigger>
                        <DataTrigger Value="True">
                            <DataTrigger.Binding>
                                <MultiBinding Converter="{StaticResource IsLastItemConverter}">
                                    <Binding RelativeSource="{RelativeSource AncestorType=rubyer:Breadcrumb}" />
                                    <Binding RelativeSource="{RelativeSource Mode=Self}" />
                                </MultiBinding>
                            </DataTrigger.Binding>
                            <Setter TargetName="separator" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="separatorIcon" Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="RubyerBreadcrumb" TargetType="{x:Type rubyer:Breadcrumb}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderBrush" Value="{DynamicResource Border}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Foreground" Value="{DynamicResource DefaultForeground}" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="ItemContainerStyle" Value="{StaticResource RubyerBreadcrumbItem}" />
        <Setter Property="rubyer:ControlHelper.MouseOverBrush" Value="{DynamicResource Primary}" />
        <Setter Property="rubyer:ItemsControlHelper.ItemMargin" Value="0" />
        <Setter Property="rubyer:ItemsControlHelper.ItemPadding" Value="3" />
        <Setter Property="Separator" Value="/" />
        <Setter Property="SeparatorBrush" Value="{DynamicResource SeconarydText}" />
        <Setter Property="SeparatorIcon" Value="{x:Null}" />
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type rubyer:Breadcrumb}">
                    <Border x:Name="Bd"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="{DynamicResource UnenableOpcity}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>